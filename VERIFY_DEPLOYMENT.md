# éªŒè¯å‰ç«¯åŽç«¯è¿žæŽ¥æˆåŠŸ

## âœ… å¿«é€ŸéªŒè¯æ¸…å•

### 1. æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ

#### åŽç«¯æœåŠ¡
```bash
# æ£€æŸ¥åŽç«¯æ˜¯å¦åœ¨è¿è¡Œï¼ˆåº”è¯¥çœ‹åˆ°è¿›ç¨‹ï¼‰
ps aux | grep nof0-api | grep -v grep

# æˆ–è€…æ£€æŸ¥ç«¯å£ 8888 æ˜¯å¦è¢«å ç”¨
lsof -i :8888
```

#### å‰ç«¯æœåŠ¡
```bash
# æ£€æŸ¥å‰ç«¯æ˜¯å¦åœ¨è¿è¡Œï¼ˆåº”è¯¥çœ‹åˆ° Next.js è¿›ç¨‹ï¼‰
ps aux | grep "next dev" | grep -v grep

# æˆ–è€…æ£€æŸ¥ç«¯å£ 3000 æ˜¯å¦è¢«å ç”¨
lsof -i :3000
```

### 2. æµ‹è¯•åŽç«¯ API ç›´æŽ¥è®¿é—®

```bash
# æµ‹è¯•åŽç«¯ API æ˜¯å¦æ­£å¸¸å“åº”
curl http://localhost:8888/api/leaderboard

# åº”è¯¥è¿”å›ž JSON æ•°æ®ï¼Œä¾‹å¦‚ï¼š
# {"leaderboard":[{"id":"...","num_trades":1,...}]}
```

å¦‚æžœè¿”å›ž JSON æ•°æ®ï¼Œè¯´æ˜ŽåŽç«¯æ­£å¸¸ã€‚

### 3. æµ‹è¯•å‰ç«¯ API ä»£ç†

```bash
# æµ‹è¯•å‰ç«¯ä»£ç†æ˜¯å¦æ­£å¸¸å·¥ä½œ
curl http://localhost:3000/api/nof1/leaderboard

# åº”è¯¥è¿”å›žä¸ŽåŽç«¯ç›¸åŒçš„ JSON æ•°æ®
```

å¦‚æžœè¿”å›ž JSON æ•°æ®ï¼Œè¯´æ˜Žå‰ç«¯ä»£ç†æ­£å¸¸ã€‚

### 4. æ£€æŸ¥æµè§ˆå™¨

#### æ‰“å¼€æµè§ˆå™¨
è®¿é—®ï¼š`http://localhost:3000`

#### æ£€æŸ¥é¡µé¢æ˜¯å¦æ­£å¸¸æ˜¾ç¤º
- âœ… é¡µé¢åº”è¯¥æ˜¾ç¤ºæ•°æ®ï¼ˆæŽ’è¡Œæ¦œã€ä»·æ ¼ã€æŒä»“ç­‰ï¼‰
- âœ… ä¸åº”è¯¥çœ‹åˆ° "Loading..." æˆ–ç©ºç™½é¡µé¢
- âœ… ä¸åº”è¯¥çœ‹åˆ° 404 é”™è¯¯

#### æ£€æŸ¥æµè§ˆå™¨æŽ§åˆ¶å°ï¼ˆF12ï¼‰
æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆF12 æˆ– Cmd+Option+Iï¼‰ï¼ŒæŸ¥çœ‹ï¼š

**Console æ ‡ç­¾é¡µï¼š**
- âŒ ä¸åº”è¯¥æœ‰çº¢è‰²é”™è¯¯ä¿¡æ¯
- âŒ ä¸åº”è¯¥æœ‰ 404 é”™è¯¯
- âœ… å¯èƒ½æœ‰ä¸€äº›æ­£å¸¸çš„æ—¥å¿—ï¼ˆå¦‚ `[TimeAlign]` ç­‰ï¼‰

**Network æ ‡ç­¾é¡µï¼š**
1. åˆ·æ–°é¡µé¢ï¼ˆCmd+R æˆ– F5ï¼‰
2. æŸ¥çœ‹ç½‘ç»œè¯·æ±‚ï¼š
   - âœ… `/api/nof1/leaderboard` - çŠ¶æ€ç åº”è¯¥æ˜¯ `200`
   - âœ… `/api/nof1/crypto-prices` - çŠ¶æ€ç åº”è¯¥æ˜¯ `200`
   - âœ… `/api/nof1/account-totals` - çŠ¶æ€ç åº”è¯¥æ˜¯ `200`
   - âŒ å¦‚æžœçœ‹åˆ° `404`ï¼Œè¯´æ˜Žè·¯ç”±æœ‰é—®é¢˜
   - âŒ å¦‚æžœçœ‹åˆ° `500`ï¼Œè¯´æ˜ŽåŽç«¯æœ‰é—®é¢˜

3. ç‚¹å‡»è¯·æ±‚æŸ¥çœ‹è¯¦æƒ…ï¼š
   - **Headers**: åº”è¯¥çœ‹åˆ° `access-control-allow-origin: *`
   - **Response**: åº”è¯¥çœ‹åˆ° JSON æ•°æ®

### 5. æ£€æŸ¥ Next.js å¼€å‘æœåŠ¡å™¨æ—¥å¿—

æŸ¥çœ‹è¿è¡Œ `npm run dev` çš„ç»ˆç«¯ï¼Œåº”è¯¥çœ‹åˆ°ï¼š

**æ­£å¸¸æƒ…å†µï¼š**
```
[API Route] Path param: [ 'leaderboard' ] Parts: [ 'leaderboard' ] Subpath: leaderboard
[API Route] Target URL: http://localhost:8888/api/leaderboard
GET /api/nof1/leaderboard 200 in XXXms
```

**å¼‚å¸¸æƒ…å†µï¼š**
- å¦‚æžœçœ‹åˆ° `404`ï¼Œè¯´æ˜Žè·¯ç”±æœªåŒ¹é…
- å¦‚æžœçœ‹åˆ° `500`ï¼Œè¯´æ˜ŽåŽç«¯è¿žæŽ¥å¤±è´¥
- å¦‚æžœçœ‹åˆ° `Target URL: http://localhost:8888/leaderboard`ï¼ˆç¼ºå°‘ `/api`ï¼‰ï¼Œè¯´æ˜Ž URL æ‹¼æŽ¥æœ‰é—®é¢˜

### 6. å®Œæ•´éªŒè¯è„šæœ¬

åˆ›å»ºä¸€ä¸ªéªŒè¯è„šæœ¬ï¼š

```bash
#!/bin/bash
# verify.sh

echo "ðŸ” éªŒè¯éƒ¨ç½²çŠ¶æ€..."
echo ""

# 1. æ£€æŸ¥åŽç«¯
echo "1ï¸âƒ£ æ£€æŸ¥åŽç«¯æœåŠ¡..."
if curl -s http://localhost:8888/api/leaderboard > /dev/null; then
    echo "   âœ… åŽç«¯æœåŠ¡æ­£å¸¸ (http://localhost:8888)"
else
    echo "   âŒ åŽç«¯æœåŠ¡æœªè¿è¡Œæˆ–æ— æ³•è®¿é—®"
    exit 1
fi

# 2. æ£€æŸ¥å‰ç«¯
echo "2ï¸âƒ£ æ£€æŸ¥å‰ç«¯æœåŠ¡..."
if curl -s http://localhost:3000 > /dev/null; then
    echo "   âœ… å‰ç«¯æœåŠ¡æ­£å¸¸ (http://localhost:3000)"
else
    echo "   âŒ å‰ç«¯æœåŠ¡æœªè¿è¡Œæˆ–æ— æ³•è®¿é—®"
    exit 1
fi

# 3. æ£€æŸ¥ API ä»£ç†
echo "3ï¸âƒ£ æ£€æŸ¥ API ä»£ç†..."
RESPONSE=$(curl -s -o /dev/null -w "%{http_code}" http://localhost:3000/api/nof1/leaderboard)
if [ "$RESPONSE" = "200" ]; then
    echo "   âœ… API ä»£ç†æ­£å¸¸ (è¿”å›ž 200)"
else
    echo "   âŒ API ä»£ç†å¼‚å¸¸ (è¿”å›ž $RESPONSE)"
    exit 1
fi

# 4. æ£€æŸ¥æ•°æ®
echo "4ï¸âƒ£ æ£€æŸ¥æ•°æ®è¿”å›ž..."
DATA=$(curl -s http://localhost:3000/api/nof1/leaderboard)
if echo "$DATA" | grep -q "leaderboard"; then
    echo "   âœ… æ•°æ®æ­£å¸¸è¿”å›ž"
else
    echo "   âŒ æ•°æ®æ ¼å¼å¼‚å¸¸"
    exit 1
fi

echo ""
echo "ðŸŽ‰ æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼å‰ç«¯å’ŒåŽç«¯å·²æˆåŠŸè¿žæŽ¥ï¼"
```

ä¿å­˜ä¸º `verify.sh`ï¼Œç„¶åŽè¿è¡Œï¼š
```bash
chmod +x verify.sh
./verify.sh
```

## ðŸŽ¯ æˆåŠŸæ ‡å¿—

å¦‚æžœä»¥ä¸‹æ‰€æœ‰æ¡ä»¶éƒ½æ»¡è¶³ï¼Œè¯´æ˜Žéƒ¨ç½²æˆåŠŸï¼š

- [x] åŽç«¯æœåŠ¡è¿è¡Œåœ¨ `http://localhost:8888`
- [x] å‰ç«¯æœåŠ¡è¿è¡Œåœ¨ `http://localhost:3000`
- [x] ç›´æŽ¥è®¿é—®åŽç«¯ API è¿”å›ž JSON æ•°æ®
- [x] é€šè¿‡å‰ç«¯ä»£ç†è®¿é—® API è¿”å›ž JSON æ•°æ®
- [x] æµè§ˆå™¨é¡µé¢æ­£å¸¸æ˜¾ç¤ºæ•°æ®
- [x] æµè§ˆå™¨æŽ§åˆ¶å°æ²¡æœ‰é”™è¯¯
- [x] ç½‘ç»œè¯·æ±‚çŠ¶æ€ç éƒ½æ˜¯ 200
- [x] Next.js æ—¥å¿—æ˜¾ç¤ºæ­£ç¡®çš„ Target URL

## ðŸ› å¸¸è§é—®é¢˜æŽ’æŸ¥

### é—®é¢˜ 1: åŽç«¯è¿”å›ž 404

**æ£€æŸ¥ï¼š**
```bash
# ç¡®è®¤åŽç«¯ API è·¯å¾„
curl http://localhost:8888/api/leaderboard
```

**è§£å†³ï¼š** æ£€æŸ¥åŽç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸å¯åŠ¨ï¼ŒæŸ¥çœ‹åŽç«¯æ—¥å¿—ã€‚

### é—®é¢˜ 2: å‰ç«¯ä»£ç†è¿”å›ž 404

**æ£€æŸ¥ï¼š**
```bash
# æŸ¥çœ‹ Next.js æ—¥å¿—ä¸­çš„ Target URL
# åº”è¯¥æ˜¾ç¤ºï¼šhttp://localhost:8888/api/leaderboard
```

**è§£å†³ï¼š** æ£€æŸ¥ `.env.local` æ–‡ä»¶ä¸­çš„ `NOF1_API_BASE_URL` é…ç½®ã€‚

### é—®é¢˜ 3: æµè§ˆå™¨æ˜¾ç¤ºç©ºç™½æˆ–åŠ è½½ä¸­

**æ£€æŸ¥ï¼š**
1. æ‰“å¼€æµè§ˆå™¨æŽ§åˆ¶å°ï¼ˆF12ï¼‰
2. æŸ¥çœ‹ Network æ ‡ç­¾é¡µ
3. æ£€æŸ¥å“ªäº›è¯·æ±‚å¤±è´¥äº†

**è§£å†³ï¼š** æ ¹æ®é”™è¯¯ä¿¡æ¯ä¿®å¤ç›¸åº”é—®é¢˜ã€‚

### é—®é¢˜ 4: CORS é”™è¯¯

**æ£€æŸ¥ï¼š** æµè§ˆå™¨æŽ§åˆ¶å°æ˜¯å¦æœ‰ CORS ç›¸å…³é”™è¯¯

**è§£å†³ï¼š** ç¡®ä¿ä½¿ç”¨å‰ç«¯ä»£ç†ï¼ˆ`/api/nof1/*`ï¼‰è€Œä¸æ˜¯ç›´æŽ¥è®¿é—®åŽç«¯ã€‚

## ðŸ“Š æ€§èƒ½æ£€æŸ¥

å¦‚æžœä¸€åˆ‡æ­£å¸¸ï¼Œè¿˜å¯ä»¥æ£€æŸ¥æ€§èƒ½ï¼š

```bash
# æµ‹è¯•å“åº”æ—¶é—´
time curl -s http://localhost:3000/api/nof1/leaderboard > /dev/null

# åº”è¯¥å¾ˆå¿«ï¼ˆ< 100ms æœ¬åœ°ï¼‰
```

## ðŸŽ‰ éªŒè¯æˆåŠŸåŽçš„ä¸‹ä¸€æ­¥

ä¸€æ—¦éªŒè¯æˆåŠŸï¼Œä½ å¯ä»¥ï¼š
1. åœ¨æµè§ˆå™¨ä¸­æ­£å¸¸ä½¿ç”¨åº”ç”¨
2. æŸ¥çœ‹å®žæ—¶æ•°æ®æ›´æ–°
3. æµ‹è¯•ä¸åŒçš„é¡µé¢å’ŒåŠŸèƒ½
4. å¼€å§‹å¼€å‘æ–°åŠŸèƒ½

